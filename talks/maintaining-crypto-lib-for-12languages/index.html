<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Maintaining cryptographic library for 12 languages</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Struggles of maintaining open source cryptography library Themis, talk by vixentael"><meta name=author content="vixentael"><meta name=generator content="Hugo 0.71.1"><link rel=stylesheet href=https://vixentael.github.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://vixentael.github.io/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://vixentael.github.io/scss/style.min.css media=screen><link rel="shortcut icon" href=https://vixentael.github.io/images/favicon.png type=image/x-icon><link rel=icon href=https://vixentael.github.io/images/favicon.png type=image/x-icon><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','G-N2XSR3ETYQ');</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div class=preloader></div><header class="fixed-top navigation"><div class=container><nav class="navbar navbar-expand-lg navbar-light bg-transparent"><a class=navbar-brand href=https://vixentael.github.io/><img class=img-fluid src=/images/vxtldev.svg alt="Security engineering by vixentael"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class="ti-menu h3"></i></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://vixentael.github.io/>Main</a></li><li class=nav-item><a class=nav-link href=https://vixentael.github.io/talks>Talks</a></li><li class=nav-item><a class=nav-link href=https://vixentael.github.io/posts>Posts</a></li><li class=nav-item><a class=nav-link href=https://vixentael.github.io/workshops>Workshops</a></li><li class=nav-item><a class=nav-link href=https://vixentael.github.io/discussions>Discussions</a></li><li class=nav-item><a class=nav-link href=https://vixentael.github.io/about>About</a></li></ul><div class=search><button id=searchOpen class=search-btn><i class=ti-search></i></button><div class=search-wrapper><form action=https://vixentael.github.io/search class=h-100><input class="search-box px-4" id=search-query name=s type=search placeholder="Type & Hit Enter..."></form><button id=searchClose class=search-close><i class="ti-close text-dark"></i></button></div></div></div></nav></div></header><div class="py-5 d-none d-lg-block"></div><section class=section><div class=container><div class=row><div class="col-lg-8 mx-auto block shadow mb-5"><h2>Maintaining cryptographic library for 12 languages</h2><div class="mb-3 post-meta">Nov 7, 2019,
<a href=/categories/software-architecture>Software Architecture</a>
<a href=/categories/talk>Talk</a></div><img src=/images/talks/themis-blackalps2019.jpg class="img-fluid w-100 mb-4" alt="Maintaining cryptographic library for 12 languages"><div class="content mb-5"><p>Maintaining cross-platform cryptographic library is a journey full of unexpected bugs, language-specific hacks, difficult decisions and endless struggle to make developer-facing APIs easy-to-use and hard-to-misuse.</p><p><strong>As developers, what do we want from using cryptographic tools?</strong> They should be easy-to-use and hard-to-misuse, cover complete use-cases instead of providing raw crypto-primitives, support language-specific style, work in the same way on numerous platforms and languages. Basically, we want less stress and more work done.</p><p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://speakerdeck.com/player/19ded2d20dd84f899ffb60efc51da1ae style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="Speakerdeck slides"></iframe></div><em><a href=https://speakerdeck.com/vixentael/maintaining-cryptographic-library-for-12-languages>Click to read slides</a>.</em></p><p><strong>But is it so easy to maintain cross-platform crypto library?</strong></p><p>How to simplify complex crypto concepts into simple <code>encrypt(msg, key)</code> and <code>decrypt(data, key)</code> functions? How to provide a unified API for 12 languages, when some of them are strongly-typed and the other one is javascript? Secure by default: what design choices should be made to protect from misuse. Multi-platformness: how to make sure that message encrypted using Ruby on x64 Ubuntu 18.04 will be <em>successfully</em> decrypted on iOS12 on iPhone armv7s? Testing wildness: static analyzers, fuzzing, unit tests, integration tests. Docs: developers copy-paste from readme anyway, how to make sure that they copy-paste correct things.</p><p>I&rsquo;ll describe the 4yrs experience on maintaining multi-platform open source library Themis: from API design to language-specific hacks.</p><h4 id=bonus-questions>Bonus questions:</h4><ul><li>what maintainers completely forget about: the biggest fail reason for users.</li><li>what is faster in Go: calling OpenSSL via c-Go interop or using native Go crypto primitives?</li><li>how to deal with multi-platformness, if BoringSSL for iOS doesn&rsquo;t support AES XTS?</li><li>epic bug with iOS-Android compatibility, which appears to be a sad story about <code>size_t</code>.</li><li>switching cryptographic backends for fun and profit: switching between BoringSSL, OpenSSL, LibreSSL, <del>libsodium and CommonCrypto</del>, and governmental crypto standards of some countries, leaving the same high-level API.</li></ul><h4 id=key-takeaways>Key takeaways:</h4><ul><li>cryptography is easy, but &ldquo;secure by default&rdquo; APIs are hard;</li><li>never agree to support multi-platform libs;</li><li>each language has unique hacks and typical mistakes, deal with it.</li></ul><p>This talk is useful for people that believe that perfect crypto lib is a C lib with 1-page readme :)</p><h3 id=watch->Watch ðŸ“º</h3><p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/TgzIYIGDlzs style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><em><a href=https://speakerdeck.com/vixentael/maintaining-cryptographic-library-for-12-languages>Click to read slides</a>.</em></p><h3 id=presented-at->Presented at âœ¨</h3><ul><li><a href=https://blackalps.ch/ba-19/index.php>BlackAlps</a>
Yverdon-les-Bains, Switzerland, 7-8 November 2019</li></ul></div><div class="mb-3 post-meta"><a href=/tags/software-architecture>#Software Architecture</a> <a href=/tags/boring-crypto>#Boring Crypto</a> <a href=/tags/cryptography>#Cryptography</a> <a href=/tags/open-source>#Open Source</a> <a href=/tags/themis>#Themis</a></div></div></div></div></section><footer class="py-4 bg-light border-top"><div class=container><div class="row justify-content-between align-items-center"><div class="col-lg-4 text-center text-lg-left mb-4 mb-lg-0"><a href=https://vixentael.github.io/ class="d-block pb-3"><img src=/images/vxtldev.svg class=img-fluid alt="Security engineering by vixentael"></a></div><div class="col-lg-4 text-center mb-4 mb-lg-0"><ul class="list-inline mb-0"></ul></div><div class="col-lg-4 text-lg-right text-center mb-4 mb-lg-0"><ul class="list-inline social-icon mb-0"><li class=list-inline-item><a href=mailto:vixentael@gmail.com><i class=ti-email></i></a></li><li class=list-inline-item><a href=https://twitter.com/vixentael><i class=ti-twitter-alt></i></a></li><li class=list-inline-item><a href=https://github.com/vixentael><i class=ti-github></i></a></li><li class=list-inline-item><a href=https://www.linkedin.com/in/anastasiiavoitova/><i class=ti-linkedin></i></a></li><li class=list-inline-item><a href=https://www.youtube.com/channel/UCJrzE_cMD8whn6qDO9R8WoA/playlists><i class=ti-youtube></i></a></li></ul></div></div><div class="text-center mt-4"><span>Â© 2021 Anastasiia Voitova, <a href=https://twitter.com/vixentael>@vixentael</a>. Using <a href=https://gohugo.io/>Hugo</a> and <a href=https://themes.gohugo.io/northendlab-hugo/>Northendlab Hugo</a>.</span></div></div></footer><script>var indexURL="https://vixentael.github.io/index.json"</script><script src=https://vixentael.github.io/plugins/jQuery/jquery.min.js></script><script src=https://vixentael.github.io/plugins/bootstrap/bootstrap.min.js></script><script src=https://vixentael.github.io/plugins/search/fuse.min.js></script><script src=https://vixentael.github.io/plugins/search/mark.js></script><script src=https://vixentael.github.io/plugins/search/search.js></script><script src=https://vixentael.github.io/js/script.min.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','G-N2XSR3ETYQ','auto');ga('send','pageview');</script></body></html>